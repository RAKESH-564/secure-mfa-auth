<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup MFA - Secure MFA Auth</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h1>üîê Setup Multi-Factor Authentication</h1>
                <p>Follow the steps below to enable MFA on your account.</p>
            </div>

            {% if error %}
            <div class="alert alert-error">
                {{ error }}
            </div>
            {% endif %}

            <div style="background-color: #e7f3ff; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #667eea;">
                <h4 style="color: #333; margin-bottom: 10px;">üì± Step 1: Download an Authenticator App</h4>
                <p style="font-size: 14px; color: #555;">
                    Download one of these apps on your smartphone:
                    <br>‚Ä¢ Google Authenticator
                    <br>‚Ä¢ Microsoft Authenticator
                    <br>‚Ä¢ Authy
                </p>
            </div>

            <div style="background-color: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
                <h4 style="color: #333; margin-bottom: 10px;">üì∏ Step 2: Scan the QR Code</h4>
                <p style="font-size: 14px; color: #555; margin-bottom: 15px;">
                    Open your authenticator app and scan this QR code:
                </p>
                <div class="qr-code-container">
                    <img src="{{ qr_code }}" alt="QR Code for MFA">
                </div>
                <p style="font-size: 12px; color: #666; margin-top: 10px;">
                    <strong>Can't scan?</strong> Enter this code manually:
                </p>
                <div class="secret-key">
                    {{ secret }}
                </div>
            </div>

            <div style="background-color: #d4edda; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #28a745;">
                <h4 style="color: #333; margin-bottom: 10px;">‚úÖ Step 3: Verify Your Code</h4>
                <p style="font-size: 14px; color: #555;">
                    Enter the 6-digit code from your authenticator app below to complete setup:
                </p>
            </div>

            <form method="POST">
                <div class="form-group">
                    <label for="otp_token">6-Digit Verification Code</label>
                    <input 
                        type="number" 
                        id="otp_token" 
                        name="otp_token" 
                        placeholder="000000" 
                        required 
                        autofocus
                        min="0"
                        max="999999"
                        style="text-align: center; font-size: 24px; letter-spacing: 10px; font-weight: bold;">
                </div>

                <button type="submit">Verify & Enable MFA</button>
            </form>

            <div class="form-footer">
                <a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
            </div>
        </div>
    </div>
</body>
</html>
